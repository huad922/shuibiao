/************************************************
SHC6601主程序框架
************************************************/

//===============================================
//寄存器头文件
//===============================================											
#include "REG251S_user.h"
#include "4802_reg_user.h"

//===============================================
//保留区域（勿删）
//===============================================
unsigned char code reserved_trap[6] _at_ 0x7A;
unsigned char code flashlockbit_reserve[8] _at_ 0x86= {0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff};            
unsigned int code password_reserve[0x08] _at_ 0x90={0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff};



//===============================================
//主函数
//===============================================
void main(void)
{
//-----------------------------------------------
//系统初始化
//-----------------------------------------------
	
//时钟初始化-------------------------------------
  CLKC = 0x07;									//使用主频，打开副频
 
  while(!(CLKC2 & 0X80))						//等待副频稳定
  {}
  
//端口初始化-------------------------------------	  
  P1_SEL0 	= 0x00;								//设置P1为数字IO口
  P1_SEL1	= 0x00;								//
  P1_SEL2	= 0x00;							 	//    	
  P1_DIR 	= 0x00;								//设置P1为输出
  
//RTC初始化-------------------------------------- 
  RTC_HOLD  = 0x00;								//打开RTC  
  INTERVAL  = 0X41;								//一秒中断一次
  AIE	   |= 0X40;								//打开RTC中断
  
//打开总中断-------------------------------------
  EA = 1;

  
//-----------------------------------------------
//系统主循环
//-----------------------------------------------
  while(1)
  {
  }
  
}



//===============================================
//RTC 中断
//===============================================
void INTERRUPT_RTC(void) interrupt 14
{
  AIF &= ~0X40;   								//清中断标志
  P1   = ~P1;									//端口取反
}


